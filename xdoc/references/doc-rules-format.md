# DOC-RULES.md 规范

## 生成方式

两层来源提取（不是凭空编）：
1. **CLAUDE.md**（如存在）→ 提取文档相关规则（文档优先原则、更新要求等）
2. **项目扫描**（始终执行）→ 文档目录结构 + 检查脚本探测 + 格式规范推导

```markdown
# DOC RULES

> 由 /xdoc 基于项目扫描 + CLAUDE.md 生成

更新时间：YYYY-MM-DD
来源：[CLAUDE.md + 项目扫描 / 仅项目扫描]

## 文档目录结构

| 目录 | 用途 | 来源 |
|------|------|------|
| [如：document/10-架构/] | [架构文档] | [项目扫描] |

## 检查脚本

| 脚本 | 用途 | 命令 | 来源 |
|------|------|------|------|
| [如：scripts/check_links.py] | 断链检测 | `python3 scripts/check_links.py` | [项目扫描] |

## 格式规范

### 通用格式
| 项目 | 规范 | 来源 |
|------|------|------|
| 标题层级 | [如：每文件有且仅有一个 H1] | [项目扫描] |
| 代码块 | [如：必须标注语言] | [项目扫描] |
| 语言 | [如：中文] | [CLAUDE.md / 项目扫描] |

### 批量编辑验证
| 条件 | 操作 | 来源 |
|------|------|------|
| [如：修改 10+ 文件] | [运行 verify_edits.py] | [CLAUDE.md / 项目扫描] |

## 代码-文档映射

### 变更类型 → 文档更新
| 代码变更 | 应更新的文档 | 来源 |
|----------|-------------|------|
| 公开接口变更 | API 文档 | [项目扫描] |
| 模块/依赖变更 | 架构文档 | [项目扫描] |
| 配置项变更 | 配置说明 | [项目扫描] |
| Bug 修复 | DEBUG-LOG.md | [CLAUDE.md / 项目扫描] |
| 架构决策 | DECIDE-LOG.md | [CLAUDE.md / 项目扫描] |

## 文档优先级规则

| 规则 | 说明 | 来源 |
|------|------|------|
| [如：文档与代码不一致时以文档为准] | [权威性判断] | [CLAUDE.md] |

## 文档禁忌（汇总速查）

> 从上面各节提取的禁忌项汇总。

- [ ] [禁忌 1]
- [ ] [禁忌 2]
```

## 更新时机

- `reinit` 时重新生成
- 文档结构或检查脚本变化时
- CLAUDE.md 文档相关规则更新后
- 用户手动调整后以用户版本为准
